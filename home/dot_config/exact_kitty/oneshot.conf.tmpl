{{- $leader := "Ctrl+s" -}}
{{- $oneshot := "combine : set_colors --reset : pop_keyboard_mode" -}}

# Enter oneshot mode.
map --new-mode oneshot {{ $leader }}
map {{ $leader }} combine : push_keyboard_mode oneshot
  \                       : set_colors background=#1a1a2e

# Exit oneshot mode.
map --mode oneshot {{ $leader }} {{ $oneshot }}
map --mode oneshot esc {{ $oneshot }}

# Clipboard
map --mode oneshot c           {{ $oneshot }} : copy_to_clipboard
map --mode oneshot v           {{ $oneshot }} : paste_from_clipboard

# Tabs
map --mode oneshot tab         {{ $oneshot }} : new_tab
map --mode oneshot shift+tab   {{ $oneshot }} : close_tab
map --mode oneshot p           {{ $oneshot }} : prev_tab
map --mode oneshot n           {{ $oneshot }} : next_tab
map --mode oneshot ,           {{ $oneshot }} : move_tab_backward
map --mode oneshot .           {{ $oneshot }} : move_tab_forward

# Windows
map --mode oneshot j           {{ $oneshot }} : launch --location=hsplit
map --mode oneshot l           {{ $oneshot }} : launch --location=vsplit
map --mode oneshot enter       {{ $oneshot }} : close_window
map --mode oneshot w           {{ $oneshot }} : close_os_window

# Layout
map --mode oneshot h           {{ $oneshot }} : swap_with_window
map --mode oneshot space       {{ $oneshot }} : next_layout
map --mode oneshot shift+space {{ $oneshot }} : last_used_layout
map --mode oneshot d           {{ $oneshot }} : detach_window new-tab
map --mode oneshot shift+d     {{ $oneshot }} : detach_tab
map --mode oneshot m           {{ $oneshot }} : toggle_layout stack

# Hints
map --mode oneshot k           {{ $oneshot }} : open_url_with_hints
map --mode oneshot f           {{ $oneshot }} : kitten hints --type path --program @
map --mode oneshot g           {{ $oneshot }} : kitten hints --type hash --program @

# Scollback
map --mode oneshot u           {{ $oneshot }} : show_scrollback
map --mode oneshot o           {{ $oneshot }} : kitty_scrollback_nvim
map --mode oneshot q           {{ $oneshot }} : show_last_non_empty_command_output
map --mode oneshot e           {{ $oneshot }} : kitty_scrollback_nvim --config ksb_builtin_last_cmd_output
map --mode oneshot backspace   {{ $oneshot }} : clear_terminal last_command active
map --mode oneshot delete      {{ $oneshot }} : clear_terminal scroll active
